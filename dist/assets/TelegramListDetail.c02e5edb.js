import{g as H}from"./assets.627312db.js";import{D as Y}from"./KTDataTable.c389d200.js";import{d as N,A as i,af as S,_ as M,r as F,i as k,k as e,q as f,B as C,C as z,o as T,a7 as W,a6 as G,au as X,e as Q,av as U,x as J,az as $,aw as A,as as Z,G as B,I as v,l as n,w as x,n as ee,F as te}from"./index.69b36d76.js";import{h as se}from"./dom.77db5301.js";import{v as q}from"./vue-debounce.min.43c24b86.js";import{S as oe}from"./sweetalert2.242d9dda.js";import"./vi.4828452c.js";import{C as ae}from"./CodeHighlighter.b2d3f0b2.js";import"./documentation.5bc44fc8.js";import"./clipboard.b86e1ca9.js";const ne=N({name:"filter-scan",components:{},emits:["filter-data"],setup(s,{emit:l}){var d=0;const h=async()=>{if(o.value.query!=c.value){o.value.query=c.value;return}(d==2||d==1)&&(d--,d==0)||l("filter-data",o.value)},c=i(""),p=q.exports.debounce(h,1e3),o=i({query:""});return S(c,p),S(o.value,()=>{h()}),{data:o,debouncedSearchTerm:c,submit:h,reset:()=>{d=2,c.value="",o.value.query=""}}}});const le={class:"menu menu-sub menu-sub-dropdown w-250px w-md-350px","data-kt-menu":"true"},ie=e("div",{class:"px-7 py-5"},[e("div",{class:"fs-5 text-dark fw-bold"},"Filter Options")],-1),de=e("div",{class:"separator border-gray-200"},null,-1),ce={class:"px-7 py-5"},re={class:"mb-7"},ue=e("label",{class:"form-label fw-semobold"},"T\xECm ki\u1EBFm:",-1),me={class:"d-flex align-items-center position-relative my-1"},he=e("div",{class:"separator my-2"},null,-1),_e={class:"d-flex justify-content-end"},be=e("button",{type:"submit",class:"btn btn-sm btn-primary","data-kt-menu-dismiss":"true"}," Apply ",-1);function pe(s,l,d,h,c,p){const o=F("KTIcon");return T(),k("div",le,[ie,de,e("div",ce,[e("div",re,[ue,e("div",me,[f(o,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),C(e("input",{type:"text","data-kt-subscription-table-filter":"search","onUpdate:modelValue":l[0]||(l[0]=r=>s.debouncedSearchTerm=r),class:"form-control form-control-solid w-100 ps-14",placeholder:"T\xECm ki\u1EBFm theo n\u1ED9i dung"},null,512),[[z,s.debouncedSearchTerm]])])]),he,e("div",_e,[e("button",{onClick:l[1]||(l[1]=(...r)=>s.reset&&s.reset(...r)),type:"reset",class:"btn btn-sm btn-outline btn-outline-dashed btn-outline-info me-2"}," Reset "),be])])])}const ve=M(ne,[["render",pe]]);$.locale("vi");const fe=N({name:"kt-scans-list",components:{KTDatatable:Y,ErrorMessage:W,Field:G,VForm:X,Fillter:ve,CodeHighlighter:ae},directives:{debounce:q.exports.vue3Debounce({lock:!0})},setup(){var I;const l=(I=Q().params.id)!=null?I:"",d=i([]),h=i(!1),c=i(0),p=i(1),o=i(20),r=i(""),_=U({id:"",group_name:"",username:"",phone:"",text:"",date:""}),D=i([{columnName:"ID",columnLabel:"id"},{columnName:"Group",columnLabel:"group_name",columnWidth:150},{columnName:"T\xEAn",columnLabel:"username",columnWidth:200},{columnName:"N\u1ED9i dung",columnLabel:"text",columnWidth:200},{columnName:"Th\u1EDDi gian",columnLabel:"date"}]),w=t=>{p.value=t!=null?t:1,b()},E=t=>{o.value=t!=null?t:20,b()},b=()=>(h.value=!0,setTimeout(()=>h.value=!1,500),A.get(`/telegram/index?group=${l}&page=${p.value}&page_size=${o.value}&search=${r.value}`).then(({data:t})=>{d.value=t.results,c.value=t.count}).catch(({response:t})=>{y(t.data.detail,"error","C\xF3 l\u1ED7i x\u1EA3y ra")})),a=i([]),u=()=>{P(a.value)},g=i(null),P=t=>{if(t)return A.delete(`telegram/message/multi-delete?id=${t}`).then(({data:m})=>{y(m.detail,"success","X\xF3a th\xE0nh c\xF4ng"),a.value.length=0,b()}).catch(({response:m})=>{y(m.data.detail,"error","C\xF3 l\u1ED7i x\u1EA3y ra")})},K=t=>{t?(_.id=t.id,_.username=t.username,_.date=t.date,_.text=t.text,_.phone=t.phone,_.group_name=t.group_name,new Z(document.getElementById("kt_modal_detail")).show()):y("","error","C\xF3 l\u1ED7i x\u1EA3y ra")},V=t=>{a.value=t},y=(t,m,j)=>{oe.fire({text:t!=null?t:j,icon:m,buttonsStyling:!1,confirmButtonText:"Ok, got it!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{se(g.value)})},O=t=>{if(!t)return"--:--";if(!$(t).isValid())return t;try{return $(t).format("DD/MM/YYYY HH:mm:ss")}catch{return t}},R=t=>{t?(r.value=t.query,p.value=1,b()):y("C\xF3 l\u1ED7i v\u1EDBi filter","error","C\xF3 l\u1ED7i x\u1EA3y ra")},L=(t,m)=>t.length>m?t.substring(0,m)+"...":t;return J(()=>{b()}),{getData:b,list:d,headerConfig:D,onItemSelect:V,selectedIds:a,deleteFewSubscriptions:u,deleteSubscription:P,getAssetPath:H,truncateText:L,ModalDelete:g,customRowTable:K,itemsPerPage:o,totalPage:c,currentPage:p,handlePage:w,handlePerPage:E,query:r,formatDate:O,handleFilter:R,loading:h,detailData:_}}}),ge={class:"card h-100 d-block"},ye={class:"card-header border-0 pt-6 position-absolute end-0 pe-1",style:{top:"-80px"}},xe={class:"card-toolbar"},De={class:"d-flex justify-content-end","data-kt-subscription-table-toolbar":"base"},we={type:"button",class:"btn btn-sm fw-bold bg-body btn-color-gray-700 btn-active-color-primary me-2","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end","data-kt-menu-flip":"top-end"},Ee={class:"d-flex justify-content-end align-items-center"},Fe={class:"fw-bold me-5"},ke={class:"me-2"},Ce={type:"button","data-bs-target":"#kt_modal_delete","data-bs-toggle":"modal",class:"btn btn-danger btn-sm"},Te={class:"hand-height-2 shadow-hvover"},$e={class:"card-body pt-0 overflow-scroll h-100 p-0 m-0"},Pe={class:"text-dark text-hover-primary fs-6 fw-bold"},Ie={class:"d-flex align-items-center"},Se={class:"symbol symbol-45px me-5"},Ae={class:"symbol-label"},Be={class:"d-flex flex-column"},Ne={class:"text-dark text-hover-primary fs-6 fw-bold"},Me={class:"text-muted fw-semobold"},qe={class:"modal fade",tabindex:"-1",id:"kt_modal_delete",ref:"ModalDelete","aria-hidden":"true"},Ke={class:"modal-dialog modal-dialog-centered"},Ve={class:"modal-content"},Oe=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"X\xE1c nh\u1EADn x\xF3a recon"),e("div",{class:"btn btn-icon btn-sm btn-active-light-primary ms-2","data-bs-dismiss":"modal","aria-label":"Close"},[e("span",{class:"svg-icon svg-icon-2x"})])],-1),Re={class:"modal-body"},Le={key:0,class:"fw-bold"},je={class:"modal-footer"},He=e("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"}," H\u1EE7y b\u1ECF ",-1),Ye={class:"modal fade",tabindex:"-1",ref:"ModalDetail","aria-hidden":"true",id:"kt_modal_detail"},ze={class:"modal-dialog modal-dialog-centered"},We={class:"modal-content"},Ge={class:"modal-body"},Xe={class:"card card-flush pt-3 mb-5 mb-xl-10"},Qe={class:"card-header mb-5"},Ue={class:"card-title"},Je={class:"d-flex align-items-center"},Ze={class:"symbol symbol-50px me-5"},et={class:"symbol-label bg-light-success"},tt={class:"d-flex flex-column"},st={class:"text-dark text-hover-primary fs-4 fw-bold"},ot={class:"text-muted fw-semobold"},at={class:"card-body py-0"},nt={class:"mb-10"},lt=e("h6",null,"Th\xF4ng tin chi ti\u1EBFt:",-1),it={class:"d-flex flex-wrap py-5"},dt={class:"me-5"},ct={class:"row fs-6 mb-3"},rt=e("div",{class:"col-3 text-gray-400"},"T\xEAn nh\xF3m:",-1),ut={class:"col-9 text-gray-800 fs-5 fw-bold"},mt={class:"row fs-6 mb-3"},ht=e("div",{class:"col-3 text-gray-400"},"N\u1ED9i dung:",-1),_t={class:"col-9 text-gray-800"},bt={class:"row fs-6"},pt=e("div",{class:"col-3 text-gray-400"},"Th\u1EDDi gian:",-1),vt={class:"col-9 text-gray-800"},ft=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-sm btn-primary","data-bs-dismiss":"modal"}," Quay l\u1EA1i ")],-1);function gt(s,l,d,h,c,p){var D,w,E,b;const o=F("KTIcon"),r=F("Fillter"),_=F("KTDatatable");return T(),k(te,null,[e("div",ge,[e("div",ye,[e("div",xe,[C(e("div",null,[e("div",De,[e("button",we,[f(o,{"icon-name":"filter","icon-class":"fs-2"}),v(" Filter ")]),f(r,{onFilterData:s.handleFilter},null,8,["onFilterData"])])],512),[[B,s.selectedIds.length===0]]),C(e("div",null,[e("div",Ee,[e("div",Fe,[e("span",ke,n(s.selectedIds.length),1),v("Selected ")]),e("button",Ce,[f(o,{"icon-name":"detele","icon-class":"bi bi-trash",style:{fontSize:"16px"}}),v(" Delete Selected ")])])],512),[[B,s.selectedIds.length!==0]])])]),e("div",Te,[e("div",$e,[f(_,{onOnItemsSelect:s.onItemSelect,data:s.list,header:s.headerConfig,loading:s.loading,"checkbox-enabled":!0,itemsPerPage:s.itemsPerPage,total:s.totalPage,currentPage:s.currentPage,onPageChange:s.handlePage,onOnItemsPerPageChange:s.handlePerPage,onCustomRow:s.customRowTable},{id:x(({row:a})=>{var u;return[v(n((u=a.id)!=null?u:"--"),1)]}),group_name:x(({row:a})=>{var u;return[e("span",Pe,n((u=a.group_name)!=null?u:"--"),1)]}),username:x(({row:a})=>{var u,g;return[e("div",Ie,[e("div",Se,[e("span",Ae,[f(o,{"icon-name":"user","icon-class":"text-success  fs-2x"})])]),e("div",Be,[e("span",Ne,n((u=a.username)!=null?u:"--"),1),e("span",Me,n((g=a.phone)!=null?g:"--"),1)])])]}),text:x(({row:a})=>[e("div",null,[e("span",null,n(s.truncateText(a.text,25)),1)])]),date:x(({row:a})=>[v(n(s.formatDate(a.date)),1)]),_:1},8,["onOnItemsSelect","data","header","loading","itemsPerPage","total","currentPage","onPageChange","onOnItemsPerPageChange","onCustomRow"])])])]),e("div",qe,[e("div",Ke,[e("div",Ve,[Oe,e("div",Re,[e("p",null,[v("B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a "),s.selectedIds.length>0?(T(),k("span",Le,n(s.selectedIds.length),1)):ee("",!0),v(" b\u1EA3n ghi n\xE0y kh\xF4ng?.")])]),e("div",je,[He,e("button",{type:"button",class:"btn btn-primary",onClickPassive:l[0]||(l[0]=a=>s.deleteFewSubscriptions())}," \u0110\u1ED3ng \xFD ",32)])])])],512),e("div",Ye,[e("div",ze,[e("div",We,[e("div",Ge,[e("div",Xe,[e("div",Qe,[e("div",Ue,[e("div",Je,[e("div",Ze,[e("span",et,[f(o,{"icon-name":"user","icon-class":"text-success fs-2x"})])]),e("div",tt,[e("span",st,n((D=s.detailData.username)!=null?D:"--"),1),e("span",ot,n((w=s.detailData.phone)!=null?w:"--"),1)])])])]),e("div",at,[e("div",nt,[lt,e("div",it,[e("div",dt,[e("div",null,[e("div",ct,[rt,e("div",ut,[e("span",null,n((E=s.detailData.group_name)!=null?E:"--"),1)])]),e("div",mt,[ht,e("div",_t,[e("span",null,n((b=s.detailData.text)!=null?b:"--"),1)])]),e("div",bt,[pt,e("div",vt,[e("span",null,n(s.formatDate(s.detailData.date)),1)])])])])])])])])]),ft])])],512)],64)}const Pt=M(fe,[["render",gt]]);export{Pt as default};
